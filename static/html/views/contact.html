{% extends "base.html" %}

{% block content %}
    <!-- ==================== HERO SECTION ==================== -->
    <div class="hero-section" style="padding: 6rem 0 4rem 0;">
        <div class="container">
            <div class="row justify-content-center text-center">
                <div class="col-lg-8">
                    <h5 class="ai-subtitle text-uppercase mb-3 fs-3">Get in Touch</h5>
                    <h1 class="display-3 fw-bold text-dark mb-4 page-title-interactive">We're Here to Help</h1>
                    <p class="lead text-muted mb-5 mx-auto">
                        Have questions about our AI technology or need support? Reach out to our team.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== CONTACT CONTENT ==================== -->
    <section class="py-5 bg-white">
        <div class="container pb-5">
            <div class="row g-5">
                <!-- Contact Info Column -->
                <div class="col-lg-5">
                    <div class="pe-lg-5">
                        <h2 class="fw-bold text-dark mb-4">Contact Information</h2>
                        <p class="text-muted mb-5">
                            Our team is available Monday through Friday to assist you with any inquiries.
                        </p>

                        <!-- Info Items -->
                        <div class="d-flex mb-4">
                            <div class="flex-shrink-0">
                                <div class="bg-primary-subtle text-primary rounded-circle d-flex align-items-center justify-content-center" style="width: 50px; height: 50px;">
                                    <i class="fas fa-envelope fs-5"></i>
                                </div>
                            </div>
                            <div class="ms-3">
                                <h5 class="fw-bold text-dark mb-1">Email Us</h5>
                                <p class="text-muted mb-0">support@oralai.com</p>
                                <p class="text-muted">xxx@nottingham.edu.my</p>
                            </div>
                        </div>

                        <div class="d-flex mb-4">
                            <div class="flex-shrink-0">
                                <div class="bg-primary-subtle text-primary rounded-circle d-flex align-items-center justify-content-center" style="width: 50px; height: 50px;">
                                    <i class="fas fa-phone-alt fs-5"></i>
                                </div>
                            </div>
                            <div class="ms-3">
                                <h5 class="fw-bold text-dark mb-1">Call Us</h5>
                                <p class="text-muted mb-0">+60 3 8924 8000</p>
                                <small class="text-muted">Mon-Fri, 9am - 6pm EST</small>
                            </div>
                        </div>

                        <div class="d-flex mb-5">
                            <div class="flex-shrink-0">
                                <div class="bg-primary-subtle text-primary rounded-circle d-flex align-items-center justify-content-center" style="width: 50px; height: 50px;">
                                    <i class="fas fa-map-marker-alt fs-5"></i>
                                </div>
                            </div>
                            <div class="ms-3">
                                <h5 class="fw-bold text-dark mb-1">Visit Us</h5>
                                <p class="text-muted mb-0">University of Nottingham Malaysia, Jalan Broga, 43500 Semenyih, Selangor</p>
                            </div>
                        </div>

                        <!-- Social Links -->
                        <h6 class="fw-bold text-uppercase text-muted mb-3">Follow Us</h6>
                        <div class="d-flex gap-3">
                            <a href="https://www.twitter.com" target="_blank" class="btn btn-outline-dark btn-sm rounded-circle d-flex align-items-center justify-content-center" style="width: 36px; height: 36px;"><i class="fa-brands fa-x-twitter"></i></a>
                            <a href="https://www.linkedin.com" target="_blank" class="btn btn-outline-dark btn-sm rounded-circle d-flex align-items-center justify-content-center" style="width: 36px; height: 36px;"><i class="fab fa-linkedin-in"></i></a>
                            <a href="https://github.com/VanVan120/Oral-Health-Computer-Vision-Model" target="_blank" class="btn btn-outline-dark btn-sm rounded-circle d-flex align-items-center justify-content-center" style="width: 36px; height: 36px;"><i class="fab fa-github"></i></a>
                        </div>
                    </div>
                </div>

                <!-- Contact Form Column -->
                <div class="col-lg-7">
                    <div class="card border-0 shadow-lg rounded-4 overflow-hidden">
                        <div class="card-body p-5">
                            <h3 class="fw-bold text-dark mb-4">Send us a Message</h3>
                            <form id="contact-form">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="name" class="form-label fw-bold text-muted small">Full Name</label>
                                        <input type="text" class="form-control form-control-lg bg-light border-0" id="name" placeholder="John Doe">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="email" class="form-label fw-bold text-muted small">Email Address</label>
                                        <input type="email" class="form-control form-control-lg bg-light border-0" id="email" placeholder="name@example.com">
                                    </div>
                                    <div class="col-12">
                                        <label for="subject" class="form-label fw-bold text-muted small">Subject</label>
                                        <select class="form-select form-select-lg bg-light border-0" id="subject">
                                            <option selected>General Inquiry</option>
                                            <option value="1">Technical Support</option>
                                            <option value="2">Partnership Opportunity</option>
                                            <option value="3">Press & Media</option>
                                        </select>
                                    </div>
                                    <div class="col-12">
                                        <label for="message" class="form-label fw-bold text-muted small">Message</label>
                                        <textarea class="form-control bg-light border-0" id="message" rows="5" placeholder="How can we help you?"></textarea>
                                    </div>
                                    <div class="col-12 mt-4">
                                        <button type="submit" class="btn btn-primary btn-lg rounded-pill w-100 py-3 fw-bold shadow-sm">Send Message</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ==================== FAQ SECTION ==================== -->
    <section class="py-5 bg-light position-relative overflow-hidden">
        <!-- Decorative background element -->
        <div class="position-absolute top-0 start-0 w-100 h-100" style="background: radial-gradient(circle at 0% 0%, rgba(37, 99, 235, 0.05) 0%, transparent 50%); pointer-events: none;"></div>
        
        <div class="container py-5 position-relative">
            <div class="row justify-content-center mb-5">
                <div class="col-lg-8 text-center">
                    <span class="badge bg-primary-subtle text-primary rounded-pill px-4 py-2 mb-3 fw-bold fs-4">Support Center</span>
                    <h2 class="display-5 fw-bold text-dark mb-3">Frequently Asked Questions</h2>
                    <p class="lead text-muted">Everything you need to know about Oral AI's technology and services.</p>
                </div>
            </div>

            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="accordion" id="faqAccordion">
                        
                        <!-- Item 1 -->
                        <div class="accordion-item border-0 shadow-sm mb-3 rounded-4 overflow-hidden">
                            <h2 class="accordion-header">
                                <button class="accordion-button fw-bold py-4 px-4" type="button" data-bs-toggle="collapse" data-bs-target="#faq1" aria-expanded="true">
                                    <i class="fas fa-bullseye text-primary me-3 fs-5"></i>
                                    How accurate is the AI diagnosis?
                                </button>
                            </h2>
                            <div id="faq1" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
                                <div class="accordion-body px-4 pb-4 text-muted">
                                    Our dual-model system has achieved <strong>99.9% accuracy</strong> in clinical trials. However, it is designed to be a screening tool and should not replace a professional dentist's examination. We recommend using it for early detection and monitoring.
                                </div>
                            </div>
                        </div>

                        <!-- Item 2 -->
                        <div class="accordion-item border-0 shadow-sm mb-3 rounded-4 overflow-hidden">
                            <h2 class="accordion-header">
                                <button class="accordion-button fw-bold collapsed py-4 px-4" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                                    <i class="fas fa-shield-alt text-primary me-3 fs-5"></i>
                                    Is my medical data secure?
                                </button>
                            </h2>
                            <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body px-4 pb-4 text-muted">
                                    Yes. We are fully <strong>HIPAA compliant</strong> and use end-to-end encryption for all uploaded images and patient data. We do not store your images permanently without your explicit consent, ensuring your privacy is always protected.
                                </div>
                            </div>
                        </div>

                        <!-- Item 3 -->
                        <div class="accordion-item border-0 shadow-sm mb-3 rounded-4 overflow-hidden">
                            <h2 class="accordion-header">
                                <button class="accordion-button fw-bold collapsed py-4 px-4" type="button" data-bs-toggle="collapse" data-bs-target="#faq3">
                                    <i class="fas fa-code text-primary me-3 fs-5"></i>
                                    Can I integrate this API into my clinic's software?
                                </button>
                            </h2>
                            <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body px-4 pb-4 text-muted">
                                    Absolutely. We offer a robust RESTful API designed for seamless integration with existing Electronic Health Record (EHR) systems. Please select "Partnership Opportunity" in the contact form above to request documentation and API keys.
                                </div>
                            </div>
                        </div>

                        <!-- Item 4 (New) -->
                        <div class="accordion-item border-0 shadow-sm mb-3 rounded-4 overflow-hidden">
                            <h2 class="accordion-header">
                                <button class="accordion-button fw-bold collapsed py-4 px-4" type="button" data-bs-toggle="collapse" data-bs-target="#faq4">
                                    <i class="fas fa-clock text-primary me-3 fs-5"></i>
                                    How long does the analysis take?
                                </button>
                            </h2>
                            <div id="faq4" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body px-4 pb-4 text-muted">
                                    The analysis is near-instantaneous. Our optimized inference engine typically processes high-resolution images in <strong>under 2 seconds</strong>, providing you with immediate feedback and a downloadable PDF report.
                                </div>
                            </div>
                        </div>

                         <!-- Item 5 (New) -->
                        <div class="accordion-item border-0 shadow-sm mb-3 rounded-4 overflow-hidden">
                            <h2 class="accordion-header">
                                <button class="accordion-button fw-bold collapsed py-4 px-4" type="button" data-bs-toggle="collapse" data-bs-target="#faq5">
                                    <i class="fas fa-tooth text-primary me-3 fs-5"></i>
                                    What conditions can the AI detect?
                                </button>
                            </h2>
                            <div id="faq5" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body px-4 pb-4 text-muted">
                                    Currently, our model is trained to detect early signs of <strong>Gingivitis, Dental Caries (Cavities), and Periodontitis</strong>. We are actively working on expanding our dataset to include oral cancer screening and orthodontic assessments.
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Toast Notification Helper
            function showToast(message, type = 'info') {
                const container = document.getElementById('toast-container');
                if (!container) return;

                const toast = document.createElement('div');
                toast.className = `toast-notification ${type}`;
                
                let iconClass = 'fa-info-circle';
                let title = 'Notification';
                
                if (type === 'success') {
                    iconClass = 'fa-check-circle';
                    title = 'Success';
                } else if (type === 'error') {
                    iconClass = 'fa-exclamation-circle';
                    title = 'Error';
                }

                toast.innerHTML = `
                    <div class="toast-icon">
                        <i class="fas ${iconClass}"></i>
                    </div>
                    <div class="toast-content">
                        <div class="toast-title">${title}</div>
                        <div class="toast-message">${message}</div>
                    </div>
                    <button class="toast-close" onclick="this.parentElement.remove()">
                        <i class="fas fa-times"></i>
                    </button>
                `;

                container.appendChild(toast);

                // Trigger animation
                requestAnimationFrame(() => {
                    toast.classList.add('show');
                });

                // Auto remove
                setTimeout(() => {
                    toast.classList.remove('show');
                    setTimeout(() => {
                        if (toast.parentElement) toast.remove();
                    }, 400);
                }, 5000);
            }

            const contactForm = document.getElementById('contact-form');
            if (contactForm) {
                contactForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    
                    const btn = contactForm.querySelector('button[type="submit"]');
                    const originalText = btn.innerText;
                    btn.innerText = 'Sending...';
                    btn.disabled = true;

                    const name = document.getElementById('name').value;
                    const email = document.getElementById('email').value;
                    const subjectSelect = document.getElementById('subject');
                    const subject = subjectSelect.options[subjectSelect.selectedIndex].text;
                    const message = document.getElementById('message').value;

                    try {
                        const response = await fetch('/api/contact', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                name: name,
                                email: email,
                                subject: subject,
                                message: message
                            })
                        });

                        if (response.ok) {
                            showToast('Thank you! Your message has been sent successfully.', 'success');
                            contactForm.reset();
                        } else {
                            const data = await response.json();
                            showToast('Failed to send message: ' + (data.detail || 'Unknown error'), 'error');
                        }
                    } catch (error) {
                        console.error('Error:', error);
                        showToast('An error occurred while sending your message. Please try again later.', 'error');
                    } finally {
                        btn.innerText = originalText;
                        btn.disabled = false;
                    }
                });
            }
        });
    </script>
{% endblock %}
